{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "padding": { "top": 10, "left": 10, "right": 10, "bottom": 10 },
  "background": "lightyellow",
  "hconcat": [
    {
      "width": 400,
      "height": 200,
      
      "title": {
        "text": "Mean Values by State (1970 to 2022)",
        "anchor": "middle"
      },
      "data": {
        "url": "data/hh_income_state_mean.csv",
        "format": { "type": "csv" }
      },
      "transform": [
        {
          "filter": "selected_state === 'All' || datum.state === selected_state"
        }
      ],
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "date",
          "type": "ordinal",
          "title": "Year",
          "axis": {
            "labelAngle": -45
          }
        },
        "y": {
          "field": "income_mean",
          "type": "quantitative",
          "title": "Mean Income Value"
        },
        "color": {
          "field": "state",
          "type": "nominal",
          "title": "State",
          "scale": {
            "range": [
              "#E69F00", "#56B4E9", "#76f59a", "#F0E442", "#0072B2", "#D55E00", 
              "#CC79A7", "#999999", "#FDE725", "#35B779", "#31688E", "#440154", 
              "#CFE11F", "#FF7F00", "#8DA0CB", "#E7298A"
            ]
          }
        },
        "tooltip": [
          { "field": "state", "type": "nominal", "title": "State" },
          { "field": "income_mean", "type": "quantitative", "title": "Mean Value" },
          { "field": "date", "type": "ordinal", "title": "Year" }
          
        ]
      }
    },
    {
      "width": 400,
      "height": 200,
      "title": {
        "text": "Median Values by State (1970 to 2022)",
        "anchor": "middle"
      },
      "data": {
        "url": "data/hh_income_state_median.csv",
        "format": { "type": "csv" }
      },
      "transform": [
        {
          "filter": "selected_state === 'All' || datum.state === selected_state"
        }
      ],
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "date",
          "type": "ordinal",
          "title": "Year",
          "axis": {
            "labelAngle": -45
          }
        },
        "y": {
          "field": "income_median",
          "type": "quantitative",
          "title": "Median Income Value"
        },
        "color": {
          "field": "state",
          "type": "nominal",
          "title": "State",
          "scale": {
            "range": [
              "#E69F00", "#56B4E9", "#76f59a", "#F0E442", "#0072B2", "#D55E00", 
              "#CC79A7", "#999999", "#FDE725", "#35B779", "#31688E", "#440154", 
              "#CFE11F", "#FF7F00", "#8DA0CB", "#E7298A"
            ]
          }
        },
        "tooltip": [
          { "field": "state", "type": "nominal", "title": "State" },
          { "field": "income_median", "type": "quantitative", "title": "Median Income Value" },
          { "field": "date", "type": "ordinal", "title": "Year" }
          
        ]
      }
    }
  ],
  "params": [
    {
      "name": "selected_state",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All", "Johor", "Kedah", "Kelantan", "Melaka", "Negeri Sembilan", 
          "Pahang", "Pulau Pinang", "Perak", "Perlis", "Sabah", "Sarawak", 
          "Selangor", "Terengganu", "W.P. Kuala Lumpur", "W.P. Labuan", 
          "W.P. Putrajaya"
        ],
        "name": "Select State: "
      }
    }
  ]
}
